<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>å®ä¾‹</title>
		<style>
			#box {
				width: 400px;
				margin: 50px auto 0;
			}
			
			#list {
				list-style: none;
				padding: 0px;
				margin: 0;
			}
			
			input {
				width: 400px;
				height: 35px;
				font-size: 18px;
				box-sizing: border-box;
				padding-left: 5px;
			}
		</style>
	</head>

	<body>
		<div id="box">
			<input type="text" name="text" id="text" placeholder="ğŸ‘.ğŸ‘ç™¾åº¦ä¸€ä¸‹ğŸ˜" />
			<ul id="list">
			</ul>
		</div>
	</body>

	<script>
		//		window.jquery390752371239050 = 	function(jsonO){
		//			alert(json);
		//		};
		function toUrl(urls, data) {
			//ç»™å¯¹è±¡æ·»åŠ æ—¶é—´æˆ³å±æ€§
			data._ = new Date().getTime();

			var arr = [];
			//éå†å‚æ•°å¯¹è±¡
			for(var k in data) {
				var str = k + "=" + data[k];
				//ä¿å­˜æ¯ä¸€ä¸ªkey=value
				arr.push(str);
			}
			//æ•°ç»„è½¬å­—ç¬¦ä¸²
			var paraStr = arr.join("&");
			//å®Œæ•´url
			urls = urls + "?" + paraStr;

			return urls;
		}

		function jsonp(baseUrl, data, success, callBack) {
			//Ajsonp05.php?wd=html&abc=å‡½æ•°å
			//è‡ªå®šä¹‰å‡½æ•°åï¼Œä¸èƒ½é‡å¤ï¼Œæ¯æ¬¡éƒ½ä¸åŒ
			var fnName = "jQuery" + new Date().getTime();
			//alert(fnName);
			//å…¨å±€ä¿å­˜ä¼ è¿‡æ¥çš„å‡½æ•°åœ°å€
			window[fnName] = success;
			//è·¯å¾„æ‹¼æ¥ï¼šAjsonp05.php?wd=html&abc=jQuery347409743902
			data[callBack] = fnName;

			var api = toUrl(baseUrl, data);
			//alert(urls);

			//é–‹å§‹è«‹æ±‚
			//1.åˆ›å»ºä¸€ä¸ªscript
			var sct = document.createElement("script");
			//è®¾ç½®srcå±æ€§
			sct.src = api;
			//å¿…é¡»æ·»åŠ åˆ°é¡µé¢å†…ï¼Œæ‰å¼€å§‹ç½‘ç»œè¯·æ±‚ï¼šsend()ï¼›
			var head = document.querySelector("head");
			head.appendChild(sct);
			//ç”¨å®Œç§»å‡º
			head.removeChild(sct);
		}

		//å‡½æ•°è°ƒç”¨
		//		jsonp("Ajsonp05.php", {
		//			wd: "html"
		//		}, function(jsonO) {
		//			alert(jsonO);
		//		}, "abc");

		var textIn = document.getElementById("text");
		//ä¿®æ”¹src
		textIn.onkeyup = function() {
			//å‡½æ•¸èª¿ç”¨ï¼šå¾Œè‡ºæ¥å£æ–‡æª”è¡¨æ˜ï¼Œåƒæ•¸1ï¼šæœå‹™å™¨è·¯å¾‘ åƒæ•¸2ï¼šæœ¬æ¬¡è«‹æ±‚çš„é¡åƒæ•¸ï¼Œåƒæ•¸4ï¼šé€šéè©²åƒæ•¸ç²å–å‰ç«¯çš„å‡½æ•¸åï¼ˆåœ°å€ï¼‰
			jsonp("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su", {
				wd: textIn.value
			}, function(jsonO) {
				console.log(jsonO);
				var arr = jsonO.s;
				var list = document.getElementById("list");
				//æ¸…ç©ºåˆ—è¡¨
				list.innerHTML = "";
				for(var i = 0; i < arr.length; i++) {
					var li = document.createElement("li");
					li.innerHTML = arr[i];
					list.appendChild(li);
				}
			}, "cb");
		};
	</script>

</html>